{% extends "layout.html" %} {% block body %}
    <script type=text/javascript src="{{ url_for('static', filename='js/result.js') }}"></script>

    <div class="container">
        <div class="div-submit text-center">
            <button class="btn btn-primary btn-md" data-toggle="collapse" data-target="#search-div">New Search</button>
        </div>

        <div id="search-div" class="collapse">
            <form role="form" method='POST' action='/'>
                <h4>Whole Document</h4>
                <div class="query">
                <textarea id="whole-doc" class="form-control simple_input doc-query" type="text" name="whole_text"
                          placeholder="Enter a query">{{ queries["whole-document"] }}</textarea>
                    <label class="control-label" for="whole-doc"></label>
                </div>

                <h4>Introduction (Problem)</h4>
                <div class="query">
                <textarea id="sec-intro" class="form-control simple_input section-query" type="text" name="intro_text"
                          placeholder="Enter a query">{{ queries["INDRODUCTION"] }}</textarea>
                    <label class="control-label" for="sec-intro"></label>
                </div>

                <h4>Background</h4>
                <div class="query">
                <textarea id="sec-back" class="form-control simple_input section-query" type="text"
                          name="background_text" placeholder="Enter a query">{{ queries["BACKGROUND"] }}</textarea>
                    <label class="control-label" for="sec-back"></label>
                </div>

                <h4>Methods (Algorithm)</h4>
                <div class="query">
                <textarea id="sec-method" class="form-control simple_input section-query" type="text"
                          name="methods_text" placeholder="Enter a query">{{ queries["METHODS"] }}</textarea>
                    <label class="control-label" for="sec-method"></label>
                </div>

                <h4>Results (Evaluation)</h4>
                <div class="query">
                <textarea id="sec-res" class="form-control simple_input section-query" type="text" name="results_text"
                          placeholder="Enter a query">{{ queries["RESULTS"] }}</textarea>
                    <label class="control-label" for="sec-res"></label>
                </div>

                <h4>Discussion</h4>
                <div class="query">
                <textarea id="sec-discuss" class="form-control simple_input section-query" type="text"
                          name="discussion_text" placeholder="Enter a query">{{ queries["DISCUSSION"] }}</textarea>
                    <label class="control-label" for="sec-discuss"></label>
                </div>

                <div class="div-submit text-center">
                    <button class="btn btn-primary btn-lg" type="submit">Submit</button>
                </div>
            </form>
        </div> <!-- /.search-div -->

        <div class="result">
            <ul class="list-group">
                {% for value in result %}
                    <li class="list-group-item">
                        <div class="result-line">
                            <div id="link">
                                <a href="/view_pdf/{{ value.paper.id }}" target="_blank">{{ value.paper.filename }}</a>
                            </div>
                            <div id="info">
                                <div id="raking">{{ value.rank | round(4, 'floor') }}</div>
                                <form action="get_ranking_info/{{ value.paper.id }}" method="POST">
                                    <button class="btn btn-primary btn-xs" type="submit" name="ranking"
                                            value="{whole-document:'{{ queries["whole-document"] }}',DISCUSSION:'{{ queries["DISCUSSION"] }}',INDRODUCTION:'{{ queries["INDRODUCTION"] }}',BACKGROUND:'{{ queries["BACKGROUND"] }}',METHODS:'{{ queries["METHODS"] }}',RESULTS:'{{ queries["RESULTS"] }}'}">
                                        Additional Info
                                    </button>
                                </form>
                            </div>
                        </div>
                    </li>
                {% else %}
                    <div class="error_msg">
                        <em>No matching paper could be found...</em>
                    </div>
                {% endfor %}
            </ul>
        </div>
    </div> <!-- /.container -->
{% endblock %}
